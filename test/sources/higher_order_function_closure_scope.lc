## Test that lexical scoping is obeyed when using
## higher order functions with a closure

import(core)

make-inc(n) = {
    inc(m) = m + n + delta
    inc
}

g(x) = {
    delta = 10
    x + delta
}

var(x)
var(delta)

f = make-inc(1)
out = f(g(x))
